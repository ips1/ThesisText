%%% The main file. It contains definitions of basic parameters and includes all other parts.

%% Settings for single-side (simplex) printing
% Margins: left 40mm, right 25mm, top and bottom 25mm
% (but beware, LaTeX adds 1in implicitly)
\documentclass[12pt,a4paper]{report}
\setlength\textwidth{145mm}
\setlength\textheight{247mm}
\setlength\oddsidemargin{15mm}
\setlength\evensidemargin{15mm}
\setlength\topmargin{0mm}
\setlength\headsep{0mm}
\setlength\headheight{0mm}
%% \openright makes the following text appear on a right-hand page
\let\openright=\clearpage

%% Settings for two-sided (duplex) printing
%\documentclass[12pt,a4paper,twoside,openright]{report}
%\setlength\textwidth{145mm}
%\setlength\textheight{247mm}
%\setlength\oddsidemargin{14.2mm}
%\setlength\evensidemargin{0mm}
%\setlength\topmargin{0mm}
%\setlength\headsep{0mm}
%\setlength\headheight{0mm}
%\let\openright=\cleardoublepage

%% Character encoding: usually latin2, cp1250 or utf8:
\usepackage[utf8]{inputenc}

%% Further useful packages (included in most LaTeX distributions)
\usepackage{amsmath}        % extensions for typesetting of math
\usepackage{amsfonts}       % math fonts
\usepackage{amsthm}         % theorems, definitions, etc.
\usepackage{bbding}         % various symbols (squares, asterisks, scissors, ...)
\usepackage{bm}             % boldface symbols (\bm)
\usepackage{graphicx}       % embedding of pictures
\usepackage{fancyvrb}       % improved verbatim environment
\usepackage{natbib}         % citation style AUTHOR (YEAR), or AUTHOR [NUMBER]
\usepackage[nottoc]{tocbibind} % makes sure that bibliography and the lists
			    % of figures/tables are included in the table
			    % of contents
\usepackage{dcolumn}        % improved alignment of table columns
\usepackage{booktabs}       % improved horizontal lines in tables
\usepackage{paralist}       % improved enumerate and itemize
\usepackage[usenames]{xcolor}  % typesetting in color
\usepackage{listings}
\usepackage{caption}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{csquotes}
\usepackage{url}
\usepackage{blindtext}
\usepackage{enumitem}


%%% Basic information on the thesis

% Thesis title in English (exactly as in the formal assignment)
\def\ThesisTitle{Performance based adaptation of Scala programs}

% Author of the thesis
\def\ThesisAuthor{Petr Kubát}

% Year when the thesis is submitted
\def\YearSubmitted{2017}

% Name of the department or institute, where the work was officially assigned
% (according to the Organizational Structure of MFF UK in English,
% or a full name of a department outside MFF)
\def\Department{Department of Distributed and Dependable Systems}

% Is it a department (katedra), or an institute (ústav)?
\def\DeptType{Department}

% Thesis supervisor: name, surname and titles
\def\Supervisor{Tomáš Bureš}

% Supervisor's department (again according to Organizational structure of MFF)
\def\SupervisorsDepartment{Department of Distributed and Dependable Systems}

% Study programme and specialization
\def\StudyProgramme{Software Systems}
\def\StudyBranch{Software Engineering}

% An optional dedication: you can thank whomever you wish (your supervisor,
% consultant, a person who lent the software, etc.)
\def\Dedication{%
I would like to thank my supervisor, Doc. RNDr. Tomáš Bureš, PhD., for his help, valuable suggestions and ideas. I would also like to thank prof. Ing. Petr Tůma, Dr. for his consultations and advice. My thanks go to Mgr. Vojtěch Horký for setting up the environment to perform Spark tests. Last but not least, I would like to thank David Kuboň for providing useful feedback about the work.
}

% Abstract (recommended length around 80-200 words; this is not a copy of your thesis assignment!)
\def\Abstract{%
Dynamic adaptivity of computer system is its ability to modify the behavior according to an environment in which it is executed. It allows the system to achieve better performance, but usually requires specialized architecture and brings more complexity.

The thesis presents an analysis and design of a framework that allows simple and fluent performance-based adaptive development at the level of functions and methods. It closely examines the API requirements and possibilities of integrating such a framework into the Scala programming language using its advanced syntactical constructs. On theoretical level, it deals with the problem of selecting the most appropriate function to execute with given input based on measurements of previous executions.

In the provided framework implementation, the main stress is laid on modularity and extensibility, as many possible future extensions are outlined. The solution is evaluated on a variety of development scenarios, ranging from input adaptation of algorithms to environment adaptations of complex distributed computations in Apache Spark.
}

% 3 to 5 keywords (recommended), each enclosed in curly braces
\def\Keywords{%
{adaptive systems} {performance optimization} {run time prediction}
}

%% The hyperref package for clickable links in PDF and also for storing
%% metadata to PDF (including the table of contents).
\usepackage[pdftex,unicode]{hyperref}   % Must follow all other packages
\hypersetup{breaklinks=true}
\hypersetup{pdftitle={\ThesisTitle}}
\hypersetup{pdfauthor={\ThesisAuthor}}
\hypersetup{pdfkeywords=\Keywords}
\hypersetup{urlcolor=blue}

% Definitions of macros (see description inside)
\include{macros}

% Title page and various mandatory informational pages
\begin{document}
\include{title}

%%% A page with automatically generated table of contents of the master thesis

\tableofcontents

%%% Each chapter is kept in a separate file
\include{preface}
\include{chap02}
\include{chap02_added}
\include{chap03}
\include{chap04}
\include{chap05}
\include{chap06}
\include{chap07}

\include{epilog}

%%% Bibliography
\include{bibliography}

%%% Figures used in the thesis (consider if this is needed)
\listoffigures

%%% Tables used in the thesis (consider if this is needed)
%%% In mathematical theses, it could be better to move the list of tables to the beginning of the thesis.
\listoftables

%%% Abbreviations used in the thesis, if any, including their explanation
%%% In mathematical theses, it could be better to move the list of abbreviations to the beginning of the thesis.
\chapwithtoc{List of Abbreviations}

\begin{itemize}
	\item \textbf{JVM} -- Java Virtual Machine, the target platform of Java, Scala and other languages
	\item \textbf{HTML} -- Hyper Text Markup Language
	\item \textbf{API} -- Application Programming Interface
	\item \textbf{REST} -- Representational State Transfer, a philosophy of web API
	\item \textbf{JSON} -- JavaScript Object Notation, a format for data exchange
	\item \textbf{XML} -- Extensible Markup Language, a format for data exchange
	\item \textbf{FFT} -- Fast Fourier Transform
	\item \textbf{JAR} -- Java Archive, a package format to distribute JVM based applications
	\item \textbf{SPL} -- Stochastic Performance Logic
	\item \textbf{OS} -- Operating System
	\item \textbf{CPU} -- Central Processing Unit
	\item \textbf{HDD} -- Hard Disk Drive
	\item \textbf{I/O} -- Input / Output
	\item \textbf{IoC} -- Inversion of Control, an application development pattern
	\item \textbf{AST} -- Abstract Syntax Tree, the result of syntax analysis of a code
	\item \textbf{DSL} -- Domain Specific Language
	\item \textbf{SBT} -- Scala Build Tools
	\item \textbf{RDD} -- Remote Distributed Dataset, a Spark API
\end{itemize}

%%% Attachments to the master thesis, if any. Each attachment must be
%%% referred to at least once from the text of the thesis. Attachments
%%% are numbered.
%%%
%%% The printed version should preferably contain attachments, which can be
%%% read (additional tables and charts, supplementary text, examples of
%%% program output, etc.). The electronic version is more suited for attachments
%%% which will likely be used in an electronic form rather than read (program
%%% source code, data files, interactive charts, etc.). Electronic attachments
%%% should be uploaded to SIS and optionally also included in the thesis on a~CD/DVD.
\chapwithtoc{Attachments}
\label{attachments}
\renewcommand{\thesection}{\Alph{section}}

\section{The enclosed disc}
\label{attach:cd}

The enclosed disc contains the directories:

\begin{itemize}
	\item \inlinecode{doc} -- the documentation of the ScalaAdaptive framework source code automatically generated by the Scaladoc tool
	\item \inlinecode{evaluation\_data} -- raw output data from the test and evaluation runs that were used in the text
	\item \inlinecode{introduction} -- a brief user guide that introduces the usage of ScalaAdaptive framework on a series of examples
	\item \inlinecode{jar} -- the compiled version of the ScalaAdaptive library in a JAR package
\item \inlinecode{source\_framework} -- the source codes of the ScalaAdaptive framework, can be opened as IntelliJ IDEA project, or built from the command-line using SBT
\item \inlinecode{source\_tests} -- the source codes of the ScalaAdaptive framework tests and evaluation code, can be opened as IntelliJ IDEA project, or built from the command-line using SBT; contains 
	\item \inlinecode{text} -- the electronic version of this text
	\item \inlinecode{tools} -- a simple custom Node.js web server that was used to perform the load balance test
\end{itemize}

\section{ScalaAdaptiveEvaluation project}
\label{attach:eval_project}

The ScalaAdaptive project contains only the framework, as it uses compile-time macros and therefore cannot be used from the same compilation unit. The ScalaAdaptiveEvaluation project contains all the source code that uses with the ScalaAdaptive framework. The important parts of the project are the following:

\begin{description}
	\item [evaluation] Package containing all the tests that were used to generate evaluation data. In each of the subpackages, there are Scala objects that have the \inlinecode{main} method and run the test. Each test contains a brief description about its inputs and output.
	\item [tutorials] Package containing a set of examples serving as simple introduction to the usage of the framework.
	\item [tests] Package containing mostly uncommented tests that were written and used in the process of development of the ScalaAdaptive framework.
\end{description}

\section{Tutorial and examples}
\label{attach:tutorial}
As a simple form of basic user documentation, a brief tutorial based on examples showing the basic usage of the ScalaAdaptive framework is included. It can be found on the enclosed disc in the \inlinecode{tutorial} folder.

\section{Scaladoc documentation}
\label{attach:scaladoc}

A detailed automatically generated documentation of all the classes in the ScalaAdaptive framework is enclosed on the disk. The 

\section{Complete list of configuration blocks}
\label{attach:config_blocks}

The following blocks can be used to configure ScalaAdaptive. If there is not a suitable block, a custom configuration implementation can be done.

\subsubsection{Analytics}
\begin{itemize}
	\item \inlinecode{AnalyticsCollection} - turns on the analytics data collection
	\item \inlinecode{NoAnalyticsCollection} - turns off the analytics data collection
\end{itemize}

\subsubsection{Logging}
\begin{itemize}
	\item \inlinecode{ConsoleLogging} - framework logs to the standard output
	\item \inlinecode{FileLogging} - framework logs to a specified file (\textit{logFilePath} argument)
	\item \inlinecode{NoLogging} - framework does not log
\end{itemize}

\subsubsection{Persistence}
\begin{itemize}
	\item \inlinecode{BufferedPersistence} - framework persists the run data in batches of \textit{serializationBufferSize} into a directory (\textit{rootHistoryPath} argument)
	\item \inlinecode{DirectPersistence} - framework persists the run data into a directory (\textit{rootHistoryPath} argument)
	\item \inlinecode{NoPersistence} - framework does not persist the data, global storage is used for persistent setup
\end{itemize}

\subsubsection{Selection strategies}
Sets the corresponding strategy as the main strategy of given type. Note that the \inlinecode{LowRunAwareStrategy} is always used as a wrapper with configurable \textit{lowRunLimit} argument. Some strategy blocks allow setting \textit{alpha} and \textit{averageWindowSize} arguments.
\begin{itemize}
	\item \inlinecode{LinearRegressionInputBasedStrategy}
	\item \inlinecode{LoessInterpolationInputBasedStrategy}
	\item \inlinecode{TTestMeanBasedStrategy}	
	\item \inlinecode{UTestMeanBasedStrategy}
	\item \inlinecode{WindowBoundRegressionInputBasedStrategy}
	\item \inlinecode{WindowBoundTTestInputBasedStrategy}
\end{itemize}

\subsubsection{History}
\begin{itemize}
	\item \inlinecode{CachedGroupHistory} - caches average run times for input descriptors
	\item \inlinecode{CachedRegressionHistory} - caches linear regression model
	\item \inlinecode{CachedStatisticsHistory} - caches statistics (used for T-test)
\end{itemize}

\openright
\end{document}
